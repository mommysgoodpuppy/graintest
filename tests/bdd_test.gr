module BddTest

from "../lib/test.gr" include Test
from "../lib/bdd.gr" include Bdd
use Test.{ assertEquals, assertTrue, assertFalse, printResults, printResultsAndExit, setSourceFile, all }
use Bdd.*

setSourceFile("./tests/bdd_test.gr")

describe("Calculator", () => {
  describe("addition", () => {
    it("adds two positive numbers", () => {
      assertEquals(4, 2 + 2)
    })

    it("adds negative numbers", () => {
      assertEquals(-3, -1 + -2)
    })

    it("adds zero", () => {
      assertEquals(5, 5 + 0)
    })
  })

  describe("subtraction", () => {
    it("subtracts two numbers", () => {
      assertEquals(3, 5 - 2)
    })

    it("handles negative results", () => {
      assertEquals(-3, 2 - 5)
    })
  })
})

describe("Boolean logic", () => {
  it("AND operations work", () => {
    all([
      assertTrue(true && true),
      assertFalse(true && false),
      assertFalse(false && true),
      assertFalse(false && false),
    ])
  })

  it("OR operations work", () => {
    all([
      assertTrue(true || true),
      assertTrue(true || false),
      assertTrue(false || true),
      assertFalse(false || false),
    ])
  })

  xit("this test is skipped with xit", () => {
    assertEquals(1, 2)
  })
})

let results = runSuite()
printResultsAndExit(results)
